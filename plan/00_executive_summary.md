# Indexed 项目规划 - 执行摘要

## 项目定位

**Indexed** 是一个 **All In One 资源整理平台**，支持用户统一管理各类数字资源（漫画、影视、音乐、小说），提供跨平台客户端和可私有化部署的服务端解决方案。

---

## 核心价值主张

### 对用户
- ✅ **统一管理**：一个应用管理所有数字资源
- ✅ **本地优先**：资源存储在本地，隐私安全
- ✅ **智能整理**：自动识别、分类、整理资源
- ✅ **跨平台同步**：多设备访问，数据同步
- ✅ **完全控制**：支持私有化部署，数据自主

### 对开发者
- ✅ **插件化架构**：易于扩展新资源类型
- ✅ **规则引擎**：灵活的整理规则配置
- ✅ **跨平台代码共享**：KMP 减少重复开发
- ✅ **开源生态**：插件市场，社区贡献

---

## 方案核心要点

### 1. 资源类型支持（4类）

| 资源类型 | 当前状态 | 优先级 | 预计完成时间 |
|---------|---------|--------|------------|
| **漫画** | 🟡 架构设计完成 | ✅ 最高 | 3个月 |
| **影视** | ⚪ 未开始 | 🟡 高 | 9-12个月 |
| **音乐** | ⚪ 未开始 | 🟡 中 | 12-15个月 |
| **小说** | ⚪ 未开始 | 🟡 中 | 15-18个月 |

### 2. 客户端平台（5个）

| 平台 | 技术方案 | 状态 | 预计完成时间 |
|------|---------|------|------------|
| **Android** | KMP + Compose | 🟡 开发中 | 持续 |
| **iOS** | KMP + Compose | 🟡 开发中 | 持续 |
| **Desktop** | KMP + Compose | 🟡 开发中 | 持续 |
| **Web** | KMP + Compose Web | 🟡 开发中 | 持续 |
| **HarmonyOS** | ArkTS + ArkUI | ⚪ 未开始 | 18-21个月 |

### 3. 功能矩阵

| 功能 | Android | iOS | Desktop | Web | HarmonyOS |
|------|---------|-----|---------|-----|-----------|
| **本地资源整理** | ✅ | ✅ | ✅ | ❌ | ✅ |
| **自部署资源服务** | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Web 后台管理** | ❌ | ❌ | ❌ | ✅ | ❌ |

---

## 技术架构亮点

### 客户端架构
```
┌─────────────────┐
│  Presentation   │  Compose UI + ViewModel
├─────────────────┤
│    Domain       │  Use Cases + Models
├─────────────────┤
│     Data        │  Local + Remote + Cache
├─────────────────┤
│     Core        │  Network + Database + Plugin Engine
└─────────────────┘
```

**关键特性**：
- Clean Architecture 分层
- MVI 状态管理
- KMP 跨平台代码共享
- SQLDelight 本地数据库
- 插件化资源管理

### 服务端架构
```
┌─────────────────────────────────────┐
│         API Gateway                  │
├─────────────────────────────────────┤
│  Auth │ Resource │ Plugin │ Metadata│
├─────────────────────────────────────┤
│  PostgreSQL │ Redis │ MinIO │ RabbitMQ │
└─────────────────────────────────────┘
```

**关键特性**：
- 微服务架构
- Kotlin + Rust 混合技术栈
- Docker 容器化部署
- WebSocket 实时通信
- 插件动态加载

### 插件系统
```
┌─────────────────────────────────────┐
│         Plugin Manager              │
├─────────────────────────────────────┤
│  Resource │ Rule │ Metadata Plugins │
├─────────────────────────────────────┤
│         Rule Engine                 │
└─────────────────────────────────────┘
```

**关键特性**：
- 统一的插件接口
- 策略模式 + 规则引擎
- 动态加载和卸载
- 插件配置管理
- 插件市场生态

---

## 实施路线图（24个月）

### Phase 1: 漫画资源完善（0-3个月）
**目标**：完善现有漫画资源管理功能

**关键交付物**：
- 本地扫描功能
- 索引和缓存系统
- 元数据刮削
- 基础阅读器

### Phase 2: 插件化架构（3-6个月）
**目标**：设计并实现插件系统

**关键交付物**：
- 插件系统框架
- 规则引擎
- 插件 SDK
- 漫画插件（示例）

### Phase 3: 服务端开发（6-9个月）
**目标**：开发可私有化部署的服务端

**关键交付物**：
- 可部署的服务端
- Web 后台管理界面
- Docker 部署方案

### Phase 4-6: 资源类型扩展（9-18个月）
**目标**：逐步支持影视、音乐、小说资源

**关键交付物**：
- 影视资源管理
- 音乐资源管理
- 小说资源管理

### Phase 7: 鸿蒙平台适配（18-21个月）
**目标**：开发鸿蒙原生应用

**关键交付物**：
- 鸿蒙原生应用
- 鸿蒙平台文档

---

## 关键设计决策

### 1. 插件化架构
**决策**：所有资源类型通过插件实现

**理由**：
- 易于扩展新资源类型
- 支持第三方开发
- 灵活的规则配置

**影响**：
- 需要设计统一的插件接口
- 需要插件管理系统
- 需要插件市场

### 2. 规则引擎
**决策**：采用策略模式 + 规则引擎混合架构

**理由**：
- 策略模式提供基础框架
- 规则引擎提供灵活性
- 两者结合平衡性能和灵活性

**影响**：
- 需要规则定义语言
- 需要规则执行引擎
- 需要规则配置管理

### 3. 服务端技术栈
**决策**：Kotlin + Rust 混合技术栈

**理由**：
- Kotlin 与客户端共享代码
- Rust 提供高性能（元数据、存储服务）
- 各取所长

**影响**：
- 需要维护两套代码
- 需要跨语言通信机制

### 4. 鸿蒙平台方案
**决策**：使用 ArkTS 原生开发

**理由**：
- 更好的性能和体验
- 充分利用鸿蒙特性
- 符合鸿蒙生态

**影响**：
- 需要单独维护代码
- 需要适配核心业务逻辑

---

## 风险与应对

### 技术风险

| 风险 | 影响 | 应对策略 |
|------|------|---------|
| **跨平台兼容性** | 高 | 提前调研，设计抽象层 |
| **性能问题** | 中 | 性能测试，优化方案 |
| **插件安全** | 中 | 沙箱机制，代码审核 |
| **鸿蒙生态** | 低 | 持续关注，备选方案 |

### 进度风险

| 风险 | 影响 | 应对策略 |
|------|------|---------|
| **需求变更** | 中 | 敏捷开发，迭代交付 |
| **技术难点** | 中 | 技术预研，备选方案 |
| **资源不足** | 高 | 合理规划，优先级管理 |

---

## 成功指标

### 功能指标
- ✅ 支持 4 种资源类型
- ✅ 支持 5 个客户端平台
- ✅ 插件系统支持 10+ 插件
- ✅ 服务端支持 10万+ 资源管理

### 性能指标
- ✅ 资源扫描速度 < 1分钟/GB
- ✅ 应用启动时间 < 2秒
- ✅ 界面响应时间 < 100ms
- ✅ API 响应时间 < 500ms

### 质量指标
- ✅ 单元测试覆盖率 > 80%
- ✅ 崩溃率 < 0.1%
- ✅ 用户满意度 > 4.5/5

---

## 下一步行动

### 立即开始（Phase 1）
1. **完善漫画资源管理**
   - 实现本地扫描器
   - 实现索引系统
   - 实现元数据刮削
   - 开发阅读器

2. **建立开发流程**
   - 代码规范
   - 测试流程
   - 文档规范

3. **技术预研**
   - 插件系统原型
   - 规则引擎原型
   - 服务端架构验证

### 近期规划（Phase 2-3）
1. **插件化架构设计**
   - 插件接口定义
   - 插件管理器设计
   - 规则引擎设计

2. **服务端开发准备**
   - 技术选型确认
   - 架构设计评审
   - 开发环境搭建

---

## 文档导航

- 📋 [长期发展规划](./00_long_term_vision.md) - 项目愿景和总体方向
- 🏗️ [架构设计文档](./01_architecture_design.md) - 整体架构和技术设计
- 📚 [资源类型扩展规划](./02_resource_types_expansion.md) - 各类资源类型的支持方案
- 🖥️ [服务端设计方案](./03_server_design.md) - 服务端架构和实现方案
- 🔌 [插件系统设计方案](./04_plugin_system_design.md) - 插件化架构和规则引擎
- 🗺️ [实施路线图](./05_implementation_roadmap.md) - 详细的开发计划和里程碑
- 📖 [README](./README.md) - 文档索引和快速导航

---

## 总结

Indexed 项目旨在打造一个**统一、智能、可扩展**的资源整理平台。通过**插件化架构**和**规则引擎**，实现灵活的资源管理；通过**跨平台客户端**和**私有化服务端**，满足不同用户的需求。

**核心优势**：
- 🎯 **统一管理**：一个应用管理所有资源
- 🔌 **插件化**：易于扩展和维护
- 🌐 **跨平台**：多平台一致体验
- 🔒 **隐私安全**：本地优先，支持私有化

**关键成功因素**：
- 完善的插件系统
- 稳定的服务端架构
- 优秀的用户体验
- 活跃的社区生态

---

**最后更新**：2026-01-27  
**版本**：1.0.0
