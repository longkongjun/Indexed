# Indexed 长期发展规划

## 项目愿景

**Indexed** 致力于成为一款 **All In One 资源整理平台**，支持用户统一管理各类数字资源（漫画、影视作品、音乐、小说等），提供跨平台客户端和可私有化部署的服务端解决方案。

---

## 核心设计目标

### 1. 资源类型支持
- ✅ **漫画**（当前已有基础，优先完善）
- 🎬 **影视作品**（电影、电视剧、纪录片等）
- 🎵 **音乐**（音频文件、专辑、播放列表）
- 📚 **小说**（电子书、文本文件）

### 2. 客户端平台
- ✅ **Android**（KMP + Compose）
- ✅ **iOS**（KMP + Compose）
- ✅ **Desktop**（KMP + Compose）
- ✅ **Web**（KMP + Compose Web）
- 🔄 **鸿蒙 HarmonyOS**（ArkTS 原生开发）

### 3. 服务端架构
- 🖥️ **可私有化部署**的资源管理服务
- 🌐 **Web 后台管理界面**
- 🔌 **插件化资源整理引擎**

---

## 功能特性矩阵

| 功能 | Android | iOS | Desktop | Web | HarmonyOS |
|------|---------|-----|---------|-----|-----------|
| **本地资源整理** | ✅ | ✅ | ✅ | ❌ | ✅ |
| **自部署资源服务** | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Web 后台管理** | ❌ | ❌ | ❌ | ✅ | ❌ |

---

## 技术栈选型

### 客户端
- **核心框架**：Kotlin Multiplatform (KMP)
- **UI 框架**：Compose Multiplatform
- **架构模式**：Clean Architecture + MVI
- **数据库**：SQLDelight（跨平台）
- **依赖注入**：Koin

### 服务端
- **主要语言**：Kotlin + Rust
- **Web 框架**：Ktor（Kotlin） + Actix-web（Rust）
- **数据库**：PostgreSQL + SQLite（轻量场景）
- **消息队列**：RabbitMQ / Redis Streams
- **存储**：MinIO / S3 兼容存储

### 鸿蒙平台
- **开发语言**：ArkTS
- **UI 框架**：ArkUI
- **架构**：参考 KMP 架构，适配鸿蒙生态

---

## 发展路线图

### Phase 1: 漫画资源完善（当前 - 3个月）
**目标**：完善现有漫画资源管理功能

- [x] 本地漫画扫描架构设计
- [ ] 实现本地漫画扫描器
- [ ] 实现索引和缓存系统
- [ ] 实现元数据刮削
- [ ] 完善漫画阅读器
- [ ] 支持 CBZ/CBR 格式
- [ ] 支持在线漫画源

**交付物**：
- 完整的漫画资源管理客户端
- 本地资源整理功能
- 基础的服务端 API

---

### Phase 2: 插件化架构设计（3-6个月）
**目标**：设计并实现可扩展的资源整理插件系统

- [ ] 抽象资源类型接口
- [ ] 实现策略模式基础框架
- [ ] 实现规则引擎
- [ ] 插件加载和管理系统
- [ ] 任务编排引擎
- [ ] 插件开发 SDK

**交付物**：
- 插件化架构文档
- 插件开发指南
- 漫画资源插件（作为示例）

---

### Phase 3: 服务端开发（6-9个月）
**目标**：开发可私有化部署的资源管理服务

- [ ] 服务端架构设计
- [ ] RESTful API 设计
- [ ] WebSocket 实时通信
- [ ] 用户认证和授权
- [ ] 资源元数据管理
- [ ] 文件存储管理
- [ ] Web 后台管理界面
- [ ] Docker 部署方案

**交付物**：
- 可私有化部署的服务端
- Web 后台管理界面
- Docker 镜像和部署文档

---

### Phase 4: 影视资源支持（9-12个月）
**目标**：扩展支持影视作品资源

- [ ] 影视资源插件开发
- [ ] 视频文件识别和解析
- [ ] 影视元数据刮削（TMDB、豆瓣等）
- [ ] 视频播放器集成
- [ ] 字幕管理
- [ ] 播放进度同步

**交付物**：
- 影视资源管理功能
- 视频播放器
- 影视元数据插件

---

### Phase 5: 音乐资源支持（12-15个月）
**目标**：扩展支持音乐资源

- [ ] 音乐资源插件开发
- [ ] 音频文件识别和解析
- [ ] 音乐元数据刮削（MusicBrainz、Last.fm 等）
- [ ] 音频播放器集成
- [ ] 播放列表管理
- [ ] 歌词显示

**交付物**：
- 音乐资源管理功能
- 音频播放器
- 音乐元数据插件

---

### Phase 6: 小说资源支持（15-18个月）
**目标**：扩展支持小说资源

- [ ] 小说资源插件开发
- [ ] 电子书格式支持（EPUB、MOBI、PDF、TXT）
- [ ] 小说元数据刮削
- [ ] 阅读器集成
- [ ] 阅读进度同步
- [ ] 书签和笔记

**交付物**：
- 小说资源管理功能
- 电子书阅读器
- 小说元数据插件

---

### Phase 7: 鸿蒙平台适配（18-21个月）
**目标**：开发鸿蒙原生应用

- [ ] 鸿蒙项目架构设计
- [ ] 核心业务逻辑适配
- [ ] UI 界面开发（ArkUI）
- [ ] 平台特定功能实现
- [ ] 测试和优化

**交付物**：
- 鸿蒙原生应用
- 鸿蒙平台文档

---

### Phase 8: 生态完善（21-24个月）
**目标**：完善生态系统和用户体验

- [ ] 插件市场
- [ ] 社区功能
- [ ] 数据统计和分析
- [ ] 性能优化
- [ ] 安全性增强
- [ ] 多语言支持

**交付物**：
- 插件市场平台
- 社区功能
- 完整的用户文档

---

## 关键设计原则

### 1. 可扩展性
- 插件化架构，支持动态扩展
- 统一的资源抽象接口
- 灵活的规则配置系统

### 2. 跨平台一致性
- 核心业务逻辑共享（KMP）
- 统一的 API 设计
- 一致的用户体验

### 3. 隐私和安全
- 支持完全私有化部署
- 本地资源不上传云端
- 端到端加密（可选）

### 4. 性能优化
- 增量扫描和更新
- 智能缓存策略
- 后台任务优化

### 5. 用户体验
- 简洁直观的界面
- 快速响应
- 丰富的自定义选项

---

## 技术债务和风险

### 技术债务
1. **数据库迁移**：当前缺少 SQLDelight 实现，需要完善
2. **依赖注入**：当前手动 DI，需要迁移到 Koin
3. **测试覆盖**：缺少单元测试和集成测试
4. **文档完善**：需要补充 API 文档和开发指南

### 风险
1. **鸿蒙平台**：ArkTS 生态相对较新，可能存在兼容性问题
2. **服务端性能**：大规模资源管理可能面临性能挑战
3. **插件安全**：动态加载插件需要严格的安全机制
4. **跨平台一致性**：不同平台的限制可能导致功能差异

---

## 成功指标

### 技术指标
- 支持 4 种以上资源类型
- 支持 5 个客户端平台
- 插件系统支持 10+ 插件
- 服务端支持 10万+ 资源管理

### 用户体验指标
- 资源扫描速度 < 1分钟/GB
- 应用启动时间 < 2秒
- 界面响应时间 < 100ms
- 用户满意度 > 4.5/5

---

## 下一步行动

1. **完善漫画资源管理**（Phase 1）
2. **设计插件化架构**（Phase 2）
3. **启动服务端开发**（Phase 3）
4. **逐步扩展资源类型**（Phase 4-6）

---

**最后更新**：2026-01-27  
**版本**：1.0.0
